<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal RAT - Demo Funcional</title>
<style>
body {font-family: Arial; margin:0; background:#030d30; color:white;}
header {background:#fcc80d;color:#030d30;padding:15px;text-align:center;}
nav {background:#222;padding:10px;display:flex;justify-content:center;gap:20px;}
nav button {background:#fcc80d;color:#030d30;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;}
section {padding:20px;}
.page {display:none;}
.page.active{display:block;}
input,button,textarea,select {width:100%;padding:8px;margin:6px 0;border-radius:6px;border:none;}
button {background:#fcc80d;color:#030d30;font-weight:bold;cursor:pointer;}
.card{background:#111;padding:15px;border-radius:12px;margin:10px 0;}
.card.destaque{border:2px solid #fcc80d;}
table{width:100%;border-collapse:collapse;}
td,th{border:1px solid #fff;padding:6px;text-align:center;}
</style>
</head>
<body>

<header>
<h1>üöÄ RAT - Rumo ao Topo (Demo)</h1>
</header>

<nav>
<button onclick="showPage('home')">Home</button>
<button onclick="showPage('login')">Login</button>
<button onclick="showPage('member')">Portal Aluno</button>
<button onclick="showPage('admin')">Portal Admin</button>
</nav>

<!-- Home -->
<section id="home" class="page active">
<h2>Bem-vindo ao Portal RAT</h2>
<p>Notas, ocorr√™ncias, listas, chat e mais!</p>
<div class="card destaque">
<h3>Premium</h3>
<p>R$8,50 / m√™s ‚≠ê Mais popular</p>
</div>
<div class="card">
<h3>B√°sico</h3>
<p>R$6,50 / m√™s</p>
</div>
<div class="card">
<h3>Avulso</h3>
<p>R$0,85 - R$2,50</p>
</div>
</section>

<!-- Login -->
<section id="login" class="page">
<h2>Login</h2>
<div>
<label>Email:</label>
<input type="email" id="loginEmail">
<label>Senha:</label>
<input type="password" id="loginPass">
<button onclick="login()">Entrar</button>
<p id="loginMsg"></p>
</div>
</section>

<!-- Portal Aluno -->
<section id="member" class="page">
<h2>Portal do Aluno</h2>
<p>Bem-vindo, <span id="memberName"></span>!</p>

<h3>Notas</h3>
<label>Bimestre:</label>
<select id="memberBim" onchange="renderGrades()">
<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
</select>
<table id="gradesTable">
<tr><th>Mat√©ria</th><th>L1</th><th>L2</th><th>L3</th><th>L4</th><th>M√©dia</th></tr>
</table>

<h3>Ocorr√™ncias</h3>
<table id="incidentsTable">
<tr><th>Mat√©ria</th><th>Tipo</th></tr>
</table>
</section>

<!-- Portal Admin -->
<section id="admin" class="page">
<h2>Portal Admin</h2>
<h3>Membros</h3>
<label>Email:</label><input type="text" id="newMemberEmail">
<label>Nome:</label><input type="text" id="newMemberName">
<label>Senha:</label><input type="password" id="newMemberPass">
<button onclick="addMember()">Adicionar Membro</button>

<ul id="membersList"></ul>

<h3>Lan√ßar Notas</h3>
<label>Bimestre:</label>
<select id="adminBim"></select>
<label>Mat√©ria:</label>
<select id="adminSubj">
<option>Matem√°tica</option><option>Portugu√™s</option><option>Ci√™ncias</option>
</select>
<table id="adminGradesTable">
<tr><th>Aluno</th><th>L1</th><th>L2</th><th>L3</th><th>L4</th><th>M√©dia</th></tr>
</table>
<button onclick="saveGrades()">Salvar Notas</button>

<h3>Lan√ßar Ocorr√™ncia</h3>
<label>Aluno:</label><select id="incidentStudent"></select>
<label>Mat√©ria:</label><select id="incidentSubj">
<option>Matem√°tica</option><option>Portugu√™s</option><option>Ci√™ncias</option>
</select>
<label>Tipo:</label>
<select id="incidentType">
<option>N√£o fez lista</option><option>Entregou fora do prazo (I)</option>
<option>Entregou fora do prazo (II)</option><option>Lista incompleta</option>
</select>
<button onclick="addIncident()">Salvar Ocorr√™ncia</button>
</section>

<script>
// Navega√ß√£o
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// Dados de demo
let users = [
  {email:"henriquefnci@gmail.com",pass:"Henrique@4",name:"Professor",role:"admin"},
  {email:"aluno1@gmail.com",pass:"123",name:"Pedro",role:"member"}
];

let grades = []; // {email,bimestre,subject,L1,L2,L3,L4}
let incidents = []; // {email,subject,type,bimestre}
let currentUser = null;

// Login
function login(){
  const email=document.getElementById('loginEmail').value;
  const pass=document.getElementById('loginPass').value;
  const user=users.find(u=>u.email===email && u.pass===pass);
  const msg=document.getElementById('loginMsg');
  if(user){
    currentUser=user;
    msg.textContent='Login realizado!';
    if(user.role==='admin') showPage('admin');
    else showPage('member');
    renderMember();
    renderAdmin();
  } else msg.textContent='Email ou senha incorretos!';
}

// Render Portal Aluno
function renderMember(){
  if(!currentUser) return;
  document.getElementById('memberName').textContent=currentUser.name;
  const sel=document.getElementById('memberBim');
  sel.value=sel.value||"1";
  renderGrades();
  renderIncidents();
}
function renderGrades(){
  const bim=document.getElementById('memberBim').value;
  const table=document.getElementById('gradesTable');
  table.innerHTML="<tr><th>Mat√©ria</th><th>L1</th><th>L2</th><th>L3</th><th>L4</th><th>M√©dia</th></tr>";
  ["Matem√°tica","Portugu√™s","Ci√™ncias"].forEach(subj=>{
    const g=grades.find(x=>x.email===currentUser.email && x.bimestre==bim && x.subject===subj);
    const L1=g?g.L1:'-'; const L2=g?g.L2:'-'; const L3=g?g.L3:'-'; const L4=g?g.L4:'-';
    const media=(L1!='-'&&L2!='-'&&L3!='-'&&L4!='-')?((+L1+ +L2+ +L3+ +L4)/4).toFixed(1):'-';
    table.innerHTML+=`<tr><td>${subj}</td><td>${L1}</td><td>${L2}</td><td>${L3}</td><td>${L4}</td><td>${media}</td></tr>`;
  });
}
function renderIncidents(){
  const bim=document.getElementById('memberBim').value;
  const table=document.getElementById('incidentsTable');
  table.innerHTML="<tr><th>Mat√©ria</th><th>Tipo</th></tr>";
  incidents.filter(i=>i.email===currentUser.email && i.bimestre==bim)
  .forEach(i=>{
    table.innerHTML+=`<tr><td>${i.subject}</td><td>${i.type}</td></tr>`;
  });
}

// Render Admin
function renderAdmin(){
  // Membros
  const list=document.getElementById('membersList');
  list.innerHTML='';
  users.filter(u=>u.role==='member').forEach(u=>{
    const li=document.createElement('li');
    li.textContent=`${u.name} (${u.email})`;
    list.appendChild(li);
  });
  // Select alunos
  const sel=document.getElementById('incidentStudent');
  sel.innerHTML='';
  users.filter(u=>u.role==='member').forEach(u=>{
    sel.innerHTML+=`<option value="${u.email}">${u.name}</option>`;
  });
  // Bimestre admin
  const bimSel=document.getElementById('adminBim');
  bimSel.innerHTML='';
  for(let i=1;i<=4;i++) bimSel.innerHTML+=`<option value="${i}">${i}</option>`;
  // Tabela notas
  renderAdminGrades();
}
function addMember(){
  const email=document.getElementById('newMemberEmail').value;
  const name=document.getElementById('newMemberName').value;
  const pass=document.getElementById('newMemberPass').value;
  if(email && pass && name){
    users.push({email,pass,name,role:'member'});
    renderAdmin();
    alert('Membro adicionado!');
  }
}
function renderAdminGrades(){
  const bim=document.getElementById('adminBim').value;
  const subj=document.getElementById('adminSubj').value;
  const table=document.getElementById('adminGradesTable');
  table.innerHTML="<tr><th>Aluno</th><th>L1</th><th>L2</th><th>L3</th><th>L4</th><th>M√©dia</th></tr>";
  users.filter(u=>u.role==='member').forEach(u=>{
    const g=grades.find(x=>x.email===u.email && x.bimestre==bim && x.subject===subj);
    const L1=g?g.L1:''; const L2=g?g.L2:''; const L3=g?g.L3:''; const L4=g?g.L4:'';
    const media=(L1&&L2&&L3&&L4)?((+L1+ +L2+ +L3+ +L4)/4).toFixed(1):'';
    table.innerHTML+=`<tr>
      <td>${u.name}</td>
      <td contenteditable="true">${L1}</td>
      <td contenteditable="true">${L2}</td>
      <td contenteditable="true">${L3}</td>
      <td contenteditable="true">${L4}</td>
      <td>${media}</td>
    </tr>`;
  });
}
function saveGrades(){
  const bim=document.getElementById('adminBim').value;
  const subj=document.getElementById('adminSubj').value;
  const table=document.getElementById('adminGradesTable');
  [...table.rows].slice(1).forEach((row,i)=>{
    const u=users.filter(u=>u.role==='member')[i];
    const gIndex=grades.findIndex(x=>x.email===u.email && x.bimestre==bim && x.subject===subj);
    const newG={email:u.email,bimestre:bim,subject:subj,
      L1:row.cells[1].textContent,L2:row.cells[2].textContent,
      L3:row.cells[3].textContent,L4:row.cells[4].textContent};
    if(gIndex>=0) grades[gIndex]=newG;
    else grades.push(newG);
  });
  alert('Notas salvas!');
  renderGrades();
}
function addIncident(){
  const email=document.getElementById('incidentStudent').value;
  const subj=document.getElementById('incidentSubj').value;
  const type=document.getElementById('incidentType').value;
  const bim=document.getElementById('adminBim').value;
  incidents.push({email,subject:subj,type,bimestre:bim});
  alert('Ocorr√™ncia adicionada!');
  renderMember();
}

</script>
</body>
</html>
